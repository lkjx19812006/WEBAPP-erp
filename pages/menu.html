<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>Hello MUI</title>
		<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
		<link rel="stylesheet" href="../css/mui.min.css">
		<!--国际化引入-->
		<script src="../i18n/en.js"></script>
		<script src="../i18n/zh_CN.js"></script>
		<style>
			.mui-content {
				background-color: #333;
			}
			
			#menu .mui-table-view {
				margin-top: 0;
			}
			
			#menu .mui-navigate-right {
				background-color: #f0f0f0;
			}
			
			#menu .mui-collapse-content {
				padding: 15px;
				border-bottom: 1px solid #d0d0d0;
			}
			
			#menu .mui-collapse-content p {
				font-size: 16px !important;
			}
		</style>
	</head>

	<body>
		<div class="mui-content" id="menu">
			<ul class="mui-table-view">
				<li class="mui-table-view-cell mui-collapse mui-active">
					<a class="mui-navigate-right" href="#">订单管理</a>
					<div v-tap="{'func': openWindow, params: {'url':'./orderMg/myOrder.html','id': 'myOder'}}" class="mui-collapse-content">
						<p>我的订单</p>
					</div>
					<div v-tap="{'func': openWindow, params: {'url':'./orderMg/departmentOrder.html','id': 'departmentOrder'}}" class="mui-collapse-content">
						<p>部门订单</p>
					</div>
					<div v-tap="{'func': openWindow, params: {'url':'./orderMg/allOrder.html','id': 'allOrder'}}" class="mui-collapse-content">
						<p>全部订单</p>
					</div>
					<div class="mui-collapse-content">
						<p>我的收付款</p>
					</div>
					<div class="mui-collapse-content">
						<p>部门收付款</p>
					</div>
					<div class="mui-collapse-content">
						<p>我的补充合同</p>
					</div>
					<div class="mui-collapse-content">
						<p>部门补充合同</p>
					</div>
					<div class="mui-collapse-content">
						<p>我的售后单</p>
					</div>
					<div class="mui-collapse-content">
						<p>部门售后单</p>
					</div>
					<div class="mui-collapse-content">
						<p>需要我采购</p>
					</div>
				</li>
				<li class="mui-table-view-cell mui-collapse  mui-active">
					<a class="mui-navigate-right" href="#">采购单管理</a>
					<div class="mui-collapse-content">
						<p>我的订单</p>
					</div>
					<div class="mui-collapse-content">
						<p>部门订单</p>
					</div>
					<div class="mui-collapse-content">
						<p>全部订单</p>
					</div>
					<div class="mui-collapse-content">
						<p>我的收付款</p>
					</div>
					<div class="mui-collapse-content">
						<p>部门收付款</p>
					</div>
					<div class="mui-collapse-content">
						<p>我的补充合同</p>
					</div>
					<div class="mui-collapse-content">
						<p>部门补充合同</p>
					</div>
					<div class="mui-collapse-content">
						<p>我的售后单</p>
					</div>
					<div class="mui-collapse-content">
						<p>部门售后单</p>
					</div>
					<div class="mui-collapse-content">
						<p>需要我采购</p>
					</div>
				</li>
			</ul>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../libs/vue.min.js"></script>
		<script src="../libs/vue-i18n.min.js"></script>
		<script src="../libs/crypto-js.js"></script>
		<script src="../libs/httpService.js"></script>
		<script type="text/javascript" charset="utf-8">
			//关闭back、menu按键监听，这样侧滑主界面会自动获得back和memu的按键事件，仅在主界面处理按键逻辑即可；
			mui.init({
				keyEventBind: {
					backbutton: false,
					menubutton: false
				},
			});
			var menu;
			mui.plusReady(function() {
				//获取当前窗口的WebviewObject对象
				menu = plus.webview.currentWebview();
				menu.setStyle({});
				//解决android 4.4以下版本webview移动时，导致fixed定位元素错乱的bug;
				if(mui.os.android && parseFloat(mui.os.version) < 4.4) {
					document.querySelector("header.mui-bar").style.position = "static";
					//同时需要修改以下.mui-contnt的padding-top，否则会多出空白；
					document.querySelector(".mui-bar-nav~.mui-content").style.paddingTop = "0px";
				}
			})
			//menu切换页面不能正常关闭的问题
			var vm = new Vue({
				el: '#menu',
				data: {},
				methods: {
					openWindow: function(params) {
						//先预加载页面
						var nowPage = mui.preload({
							url: params.url,
							id: params.id, //默认使用当前页面的url作为id							
							createNew: false //禁止重复创建
						});
						//200毫秒后显示
						//必须先让当前页面还原 才能打开下级页面

						//						//获取当前页面ID
						//						var nowPageId = common.getItem('nowPageId');
						//						//通知当前页面关闭菜单	再打开新页面						
						//						var nowWebView = plus.webview.getWebviewById(nowPageId);
						//						mui.fire(nowWebView, 'closeMenu');
						setTimeout(function() {
							nowPage.show('slide-in-right', 300)
						}, 300)
					}
				}
			})
		</script>
	</body>

</html>