<!DOCTYPE html>
<html class="ui-page-login">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="../css/mui.min.css" rel="stylesheet" />
	</head>

	<body>
		<!-- 主页面标题 -->
		<div class="mui-content" id="home">
			<header class="mui-bar mui-bar-nav">
				<h1 class="mui-title">首页</h1>
				<a class="mui-icon mui-icon-bars mui-pull-left" @touchStart="showMenu"></a>
				<a class="mui-icon mui-icon-person mui-pull-right" @touchStart="showUserInfo"></a>
			</header>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../libs/vue.min.js"></script>
		<script src="../libs/crypto-js.js"></script>
		<script src="../libs/httpService.js"></script>
		<script>
			mui.init({
				subpages: [{
					url:'search.html', //子页面HTML地址，支持本地地址和网络地址
					id: 'search', //子页面标志
					styles: {
						top: '45px', //子页面顶部位置		
						height: '40px'
					},
					extras: {} //额外扩展参数
				}]
			});
			var home, menu, mask, userInfo;
			mask = mui.createMask(function() {
				menu = plus.webview.getWebviewById('menu')
				if(menu) menu.close();
			});
			var vm = new Vue({
				el: '#home',
				data: {

				},
				methods: {
					fun: function() {
						alert('asdfs')
					},
					showMenu: function() {
						//显示菜单	
						setTimeout(function() {
							mask.show()
						}, 100)
						menu = mui.openWindow({
							url: 'menu.html',
							id: 'menu',
							show: {
								aniShow: 'slide-in-left',
							},
							createNew: false,
							styles: {
								left: '0',
								width: '70%',
								zindex: 9999
							},
							waiting: {
								autoShow: false, //自动显示等待框，默认为true
								title: '正在加载...', //等待对话框上显示的提示内容
							}
						})
					},
					showUserInfo: function() {
						userInfo = mui.openWindow({
							url: 'userInfo.html',
							id: 'userInfo',
							show: {
								aniShow: 'slide-in-right',
							},
							createNew: false,
							waiting: {
								autoShow: false, //自动显示等待框，默认为true
							}
						})
					}
				}
			})
			mui.plusReady(function() {
				home = plus.webview.currentWebview();
				//校验登录状态
//				if(!common.validateLogin()) {
//					setTimeout(function() {
//						home.close();
//					}, 0)
//				}
			})
			//添加自定义事件监听
			window.addEventListener('closeMask', function(event) {
				mask.close()
			});
		</script>
	</body>

</html>